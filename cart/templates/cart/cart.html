{% extends 'base.html' %}

{% block content %}
<section class="cart my-4">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12">
                <h3>Shopping Cart</h3>
                <hr>
            </div>
            <div class="row d-flex justify-content-md-between">
                <div class="col-12 col-md-7 p-0 ">
                    <div class="custom-border p-3">
                        <!-- Medium screens -->
                        <table class="table cart d-none d-sm-table">
                            <thead>
                                <tr>
                                    <th scope="col">Item</th>
                                    <th scope="col"></th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Sub-total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in cart_items %}
                                <tr>
                                    <th scope="row">
                                        <div class="cart-item-picture">
                                            <img src="{{ item.book.image.url }}" alt="{{ item.book.title }} image">
                                        </div>
                                    </th>
                                    <td>
                                        <div class="cart-item-description">
                                            <p><a href="{% url 'product' item.book.id %}">{{ item.book.title }}</a></p>
                                            {% for author in item.book.author.all|slice:':1' %}
                                            <p>{{ author }}</p>
                                            {% endfor %}
                                        </div>
                                    </td>
                                    <td>
                                        <div class="cart-item-price">
                                            <p>€{{ item.book.price }}</p>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="cart-item-quantity">
                                            <input type="number" step="1" min="1" class="form-control item-quantity" name="quantity"
                                                pattern="^[1-9]+[0-9]*" value="{{ item.quantity }}">
                                            <div class="cart-controls d-flex justify-content-around">
                                                <a href="" class=""><i class="fa-solid fa-trash-can" style="color: #e66e2d;"></i></a>
                                                <a href="" class=""><i class="fa-solid fa-rotate-right" style="color: #e66e2d;"></i></a>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="cart-item-total-price">
                                            <p>€</p>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <!-- Mobile -->
                        <table class="table cart d-table d-sm-none">
                            <thead>
                                <tr>
                                    <th scope="col">Item</th>
                                    <th scope="col"></th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Sub-total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in cart_items %}
                                <tr>
                                    <th scope="row">
                                        <div class="cart-item-picture">
                                            <img src="{{ item.book.image.url }}" alt="{{ item.book.image.url }} image">
                                        </div>
                                    </th>
                                    <td>
                                        <div class="cart-item-description">
                                            <p><a href="{% url 'product' item.book.id %}">{{ item.book.title }}</a></p>
                                            {% for author in item.book.author.all|slice:':1' %}
                                            <p>{{ author }}</p>
                                            {% endfor %}
                                        </div>
                                        <div class="cart-item-quantity">
                                            <input type="number" step="1" min="1" class="form-control item-quantity" name="quantity"
                                                pattern="^[1-9]+[0-9]*" value="{{ item.quantity }}">
                                            <div class="cart-controls d-flex justify-content-around">
                                                <a href="" class=""><i class="fa-solid fa-trash-can" style="color: #e66e2d;"></i></a>
                                                <a href="" class=""><i class="fa-solid fa-rotate-right" style="color: #e66e2d;"></i></a>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="cart-item-price">
                                            <p>€{{ item.book.price }}</p>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="cart-item-total-price">
                                            <p>€11.99</p>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-12 col-md-4 mt-3 mt-md-0 custom-border ms-2 p-4">
                    <div class="row">
                        <div class="col-12">
                            <h5>Discount Code</h5>
                            <form action="">
                                <input class="mb-md-0 mb-2" type="text" name="" id="">
                                <button type="submit" class="btn-orange mt-md-2">Add</button>
                            </form>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-12">
                            <div class="subtotal d-flex justify-content-between">
                                <p>SubTotal:</p>
                                <p>€{{ total|floatformat:2 }}</p>
                            </div>
                            <div class="delivery d-flex justify-content-between">
                                <p>Delivery:</p>
                                <p>€{{ delivery_fee }}</p>
                            </div>
                            <div class="discount d-flex justify-content-between">
                                <p>Discount:</p>
                                <p>€0</p>
                            </div>
                            <hr>
                            <div class="total d-flex justify-content-between">
                                <h5>Total:</h5>
                                <h5>€{{ grand_total|floatformat:2 }}</h5>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <a href="" class="btn btn-brown my-2"><i class="fa-solid fa-cart-shopping" style="color: #fff;"></i> Checkout</a>
                        <a href="{% url 'all-products' %}" class="btn btn-orange"><i class="fa-solid fa-arrow-left"
                                style="color: #fff;"></i> Continue
                            Shopping</a>

                    </div>

                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}